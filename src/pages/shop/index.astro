---
const BASE =
  import.meta.env.BASE_URL.endsWith("/")
    ? import.meta.env.BASE_URL
    : `${import.meta.env.BASE_URL}/`;

const withBase = (p) => `${BASE}${String(p).replace(/^\/+/, "")}`;

const products = [
  {
    name: "Tuscan Sea Salt",
    slug: "tuscan-salt",
    price: "$12",
    origin: "Tuscany, Italy",
    image: "images/products/tuscan-salt.jpg",
    storySlug: "stories/tuscany",
  },
];
---

<html lang="en">
  <head>
    <title>Shop</title>
    <meta name="description" content="Travel pantry souvenirs." />
  </head>

  <body style="font-family: system-ui; max-width:960px; margin:40px auto; padding:0 16px;">
    <header style="display:flex; justify-content:space-between; align-items:center;">
      <h1>Shop</h1>
      <nav style="display:flex; gap:12px;">
        <a href={withBase("")}>Home</a>
        <a href={withBase("stories/tuscany")}>Stories</a>
        <a href={withBase("shop")}>Shop</a>
      </nav>
    </header>

    <section style="margin-top:24px; display:grid; grid-template-columns:repeat(auto-fit, minmax(240px, 1fr)); gap:16px;">
      {products.map((p) => (
        <article style="border:1px solid #eee; border-radius:16px; padding:16px;">
          <img src={withBase(p.image)} alt={p.name} style="width:100%; border-radius:12px; aspect-ratio:4/3; object-fit:cover;" />
          <h2>{p.name}</h2>
          <div>{p.price} • {p.origin}</div>
          <a href={withBase(`shop/${p.slug}`)}>View</a> ·
          <a href={withBase(p.storySlug)}>Story</a>
        </article>
      ))}
    </section>
  </body>
</html>
